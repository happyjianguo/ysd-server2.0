XML系统对接批量代收测试程序，给商户参考使用
该工程依赖项目：xmlEntity、xsigntool
测试入口工程：xmlInterf
测试入口：com.allinpay.xmltrans.demo.TranxMain

测试方式：选择需要对接的测试接口，关闭注释，并把其他无需测试的接口注释掉，以免干扰

该demo是xml批量代收交易接口的测试例子，其他接口也大同小异，
签名和验签的使用方式均有。


##################################added by xsc##############################################
测试商户的私钥
20060400000044502.p12
测试商户的公钥
allinpay-pds.cer

测试商户号：200604000000445
用户：20060400000044502
密码：111111（证书密码也是这个）
虚拟账户：201303000000000130440
测试交易发送地址：https://113.108.182.3/aipg/ProcessServlet
若需手工更新交易状态，请打开地址：http://113.108.182.3:8083/apptest/updateRet.jsp
web前端交易查询地址：http://113.108.182.3:8083/aiap
web端用户名：20060400000044502
用户密码：`12qwe

通讯使用HTTPS进行通讯，交易内容使用数字证书进行签名,签名算法为SHA1withRSA


##################################added by xsc##############################################
实现认证和绑卡：
1，商户上送四要素信息时，调用如下接口：
实名付申请，交易代码211006
2，商户上送手机动态码验证时，调用如下接口：
实名付确认，交易代码 211006C
3，商户重复发送动态码，调用如下接口：
实名付短信重发，交易代码211006R

账户充值   ：
商户完成实名付验证后时，对持卡人发起扣款，调用如下接口：
单笔实时代收，交易代码100011

提现：
单笔实时代付，交易代码100014

此外，对于代收付交易，需要查询接口，用于轮询机制，
交易结果查询请求，交易代码200004，
对账接口，看你们需求。。

实名付，，
对于首次扣款 ，需要 完成 验证绑卡流程，，  才能调用，单笔实时代收，交易代码100011；
首次验证通过之后，后续的扣款，可由商户，自行设计 验证码或者支付密码，进行直接扣款（即直接调用，单笔实时代收，交易代码100011；）


##################################added by xsc##############################################

======================发送报文======================：
<?xml version="1.0" encoding="GBK"?><AIPG>
  <INFO>
    <TRX_CODE>220001</TRX_CODE>
    <VERSION>03</VERSION>
    <DATA_TYPE>2</DATA_TYPE>
    <LEVEL>5</LEVEL>
    <USER_NAME>20060400000044502</USER_NAME>
    <USER_PASS>`12qwe</USER_PASS>
    <REQ_SN>200604000000445-1506221177276</REQ_SN>
    <SIGNED_MSG>6af186f0b124a93066645f7faae1a172e905e0659c8768b21a7380a04aa16e2a74f149721c15f7cc8c22c286aeff35556ae797cc166e3b40bb6c79ec14980435076e56ea5e27487689debffb540aaf17f2751c6822d140ce60c21db476ea61992c4bb051647f4f74400b3df02a5986920b548e326d13476b122d566b44110276</SIGNED_MSG>
  </INFO>
  <IDVER>
    <NAME>555</NAME>
    <IDNO>320113196912021509</IDNO>
  </IDVER>
</AIPG>
======================响应内容======================
<?xml version="1.0" encoding="GBK"?><AIPG>
  <INFO>
    <TRX_CODE>220001</TRX_CODE>
    <VERSION>03</VERSION>
    <DATA_TYPE>2</DATA_TYPE>
    <REQ_SN>200604000000445-1506221177276</REQ_SN>
    <RET_CODE>0000</RET_CODE>
    <ERR_MSG>提交成功</ERR_MSG>

  </INFO>
  <VALIDRET>
    <RET_CODE>3999</RET_CODE>
  </VALIDRET>
</AIPG>
327
71c2b0b2a32571a237ce85976267e561b7ead15f06bf565d4a957ba9c3033ea4e9341f069b629c7a23447ae2ae1e12d199361e13e8c49de3760a3a66274dde28e12b6ab1d56b2a095a8b589396cc4c0b7630e88ba5431594ee30d7855c69f7fb60b33ab6cebb1d820be806b18945da05e8708b639c34100057653cb61704039d77fa8912465f4d4c7ab2523f3a3afca7869374ff1f689d6177f87ec8915ce525dd0252d7c170d22f4de107255d412330a6fa5f1412b3e578c56adfb9cf14bfdfab820c8d562f5df4a1167e87f950c49e5249e14a6ad6f22c5153c0629edbef2cfaff266620d968afad4bd82a0b898c4a89a7e6c4f808096cfa91840e7d538489
验签结果[true]
响应内容验证通过
<?xml version="1.0" encoding="GBK"?><AIPG>
  <INFO>
    <TRX_CODE>220001</TRX_CODE>
    <VERSION>03</VERSION>
    <DATA_TYPE>2</DATA_TYPE>
    <REQ_SN>200604000000445-1506221177276</REQ_SN>
    <RET_CODE>0000</RET_CODE>
    <ERR_MSG>提交成功</ERR_MSG>
    <SIGNED_MSG>71c2b0b2a32571a237ce85976267e561b7ead15f06bf565d4a957ba9c3033ea4e9341f069b629c7a23447ae2ae1e12d199361e13e8c49de3760a3a66274dde28e12b6ab1d56b2a095a8b589396cc4c0b7630e88ba5431594ee30d7855c69f7fb60b33ab6cebb1d820be806b18945da05e8708b639c34100057653cb61704039d77fa8912465f4d4c7ab2523f3a3afca7869374ff1f689d6177f87ec8915ce525dd0252d7c170d22f4de107255d412330a6fa5f1412b3e578c56adfb9cf14bfdfab820c8d562f5df4a1167e87f950c49e5249e14a6ad6f22c5153c0629edbef2cfaff266620d968afad4bd82a0b898c4a89a7e6c4f808096cfa91840e7d538489</SIGNED_MSG>
  </INFO>
  <VALIDRET>
    <RET_CODE>3999</RET_CODE>
  </VALIDRET>
</AIPG>
提交成功
交易结果：3999:null

##################################added by xsc##############################################

 [产品名称]
1，实名付：包括实名付验证和实名付扣款。
2，实名付验证：客户的姓名、证件号码、银行卡号、手机号码及手机动态码的匹配性。
3，实名付扣款：客户需要进行实名付验证后，上送姓名、证件号码、银行卡号及扣款金额进行扣款。


[商户业务流程推荐]
1，商户平台设计客户信息采集页面，采集客户的基本信息，包括：姓名、证件号码、银行卡号、手机号码；
2，商户平台完成简单的号码规则校验后，设计“获取动态码”的选项；
3，商户平台上送通联支付以上四要素信息（交易代码211006）；
4，通联支付将以上四要素信息上送自有渠道验证四要素的匹配性；
5，验证失败后，直接反馈给商户“四要素验证失败”的状态；
6，验证成功后，通联支付再向客户发送随机动态码，并反馈商户平台“已经向客户发送随机动态码”的状态；
7，商户平台采集手机动态码，上送通联支付（交易代码211006C）；
8，通联支付验证客户信息和手机动态码的匹配性；
9，验证失败后，反馈商户平台手机动态码验证失败；
10，验证成功后，反馈商户平台“手机动态码匹配成功”的状态；
11，商户平台再发起对这张银行卡的扣款，调用通联支付代扣接口（交易代码100011）；
12，通联支付验证这张银行卡是否之前做过实名付的验证，再向直连银行或其他支付渠道进行扣款；
13，之后反馈银行卡的扣款支付结果。

[商户平台注意事项]
1，商户平台可以多次调用我司的实名付验证，对于重复验证的身份信息，按照之前描述的流程正常处理（交易代码211006R）；
2，实名付测试环境的短信验证码，默认为  9999

[实名付接入接口]
1，商户上送四要素信息时，调用如下接口：
实名付申请，交易代码211006
2，商户上送手机动态码验证时，调用如下接口：
实名付确认，交易代码 211006C
3，商户重复发送动态码，调用如下接口：
实名付短信重发，交易代码211006R
4，商户调用实名付扣款时，调用如下接口：
单笔实时代收，交易代码100011
http://113.108.182.3:8282/techsp/helper/filedetail/tlt/filedetail132.html

##################################added by xsc 提现返回结果##############################################
<?xml version="1.0" encoding="GBK"?><AIPG>
  <INFO>
    <TRX_CODE>100014</TRX_CODE>
    <VERSION>03</VERSION>
    <DATA_TYPE>2</DATA_TYPE>
    <REQ_SN>200333000002927-1506335970217</REQ_SN>
    <RET_CODE>1000</RET_CODE>
    <ERR_MSG>借方余额不足:20170900000000688900不满足:[0&lt;=(-402--201=-201)&lt;=10000000000000000]</ERR_MSG>
    <SIGNED_MSG>166da5301f930fa275b265d771eb272124e18f41643547b4577fb810b5bff577a94023476c032d600a3184361926d16d61ecab8be2ef4ee906d6c050e8dca3bfc2e50b076b73a5de2cb2eae3485ddb04ba41b5781919d3369fd336fc0c7fb5224ac5e50808165abccde4ba84addf01d0c0255b1524b99ec6a16af573f907c43a4e08f5753b4f7c335faa25beec27ba45132bdb1d0c34658891068d8578e45a74f59ab7d2029647dd43f45d5eac8549e618efedb109625a6417903a7634bd53daae121ecca3e5560f55d831ffa0d59afb2e9c862e6fd81d6f4f71ca6040816b4e04912228dcd74bd628f6be07f769143621f1e699ec85c58574a0ff71366dae93</SIGNED_MSG>
  </INFO>
</AIPG>